<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Trevor Manternach</title><link>https://trevormanternach.com/</link><description>This is my personal weblog.</description><atom:link href="https://trevormanternach.com/feed.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents © 2023 &lt;a href="mailto:trevor@trevormanternach.com"&gt;Trevor Manternach&lt;/a&gt; </copyright><lastBuildDate>Fri, 03 Nov 2023 23:03:20 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Python script to retrieve DHCP leases from Palo Alto firewall</title><link>https://trevormanternach.com/python-script-to-retrieve-dhcp-leases-from-palo-alto-firewall/</link><dc:creator>Trevor Manternach</dc:creator><description>&lt;p&gt;I have been using a Palo Alto PA-220 firewall for my home router for years. It is my DHCP server for my LAN. I often find myself needing to view the DHCP leases to see what IP address some random device (WLED, ESPHome devices, etc.) has. The web interface for the PA-220 is unbearably slow and the SSH CLI takes 30+ seconds after login to give me a prompt.&lt;/p&gt;
&lt;p&gt;To speed up this task, I wrote this fairly simple script using python3. It uses the REST API that PAN-OS has to retrieve the DHCP leases. This script completes for me in less than 1 second. It outputs a JSON object. This works best for me as I find JSON to be humanly-readable and also allows me to pipe it to a utility like &lt;cite&gt;jq&lt;/cite&gt; to filter it quickly.&lt;/p&gt;
&lt;p&gt;Here is the code:&lt;/p&gt;
&lt;pre class="literal-block"&gt;import requests
import json
from xmltodict import parse, ParsingInterrupted
from urllib3.exceptions import InsecureRequestWarning

requests.packages.urllib3.disable_warnings(category=InsecureRequestWarning)

host = "192.168.2.1" # IP of Palo-Alto firewall goes here.
key = "KEY_GOES_HERE" # Run `curl -X GET 'https://&amp;lt;host&amp;gt;/api/?type=keygen&amp;amp;user=&amp;lt;username&amp;gt;&amp;amp;password=&amp;lt;password&amp;gt;'` to create API key.
interface = "ethernet1/2" # can also use "all"

def get_dhcp_leases(host, key, interface):
url = "https://{host}/api/?type=op&amp;amp;cmd=&amp;lt;show&amp;gt;&amp;lt;dhcp&amp;gt;&amp;lt;server&amp;gt;&amp;lt;lease&amp;gt;&amp;lt;interface&amp;gt;{interface}&amp;lt;/interface&amp;gt;&amp;lt;/lease&amp;gt;&amp;lt;/server&amp;gt;&amp;lt;/dhcp&amp;gt;&amp;lt;/show&amp;gt;&amp;amp;key={key}".format(host=host, key=key, interface=interface)
response = requests.get(url,verify=False)
return response

if __name__ == "__main__":
dhcp_leases = get_dhcp_leases(host, key, interface)
data = parse(dhcp_leases.content)
entries = data['response']['result']
print(json.dumps(entries, indent=4))&lt;/pre&gt;
&lt;p&gt;I also have this hosted as a &lt;a class="reference external" href="https://gist.github.com/tmanternach/21e3bba23261cbd5bacba2e50588acf6"&gt;gist&lt;/a&gt; on github. Any changes I make to it are more likely to end up there than here. Comments are welcome over there, too!&lt;/p&gt;</description><guid>https://trevormanternach.com/python-script-to-retrieve-dhcp-leases-from-palo-alto-firewall/</guid><pubDate>Fri, 03 Nov 2023 22:50:34 GMT</pubDate></item><item><title>Control Palo Alto GlobalProtect VPN using AppleScript</title><link>https://trevormanternach.com/2023/08/17/control-palo-alto-globalprotect-vpn-using-applescript/</link><dc:creator>Trevor Manternach</dc:creator><description>&lt;p&gt;I know it's a little strange to still be writing AppleScript in 2023, but this was the best way I found to easily connect and disconnect from a GlobalProtect VPN "automatically". I trigger this from a Keyboard Maestro shortcut, you are free to trigger it any way you wish!&lt;/p&gt;
&lt;p&gt;This is a simple script that will toggle the connect/disconnect state of GlobalProtect on macOS. Tested with the latest version of GlobalProtect (v6.2.0-89) and macOS Ventura (13.4.1).:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(*
Toggle GlobalProtect VPN with AppleScript
Tested using macOS Ventura 13.4.1 and GlobalProtect version 6.2.0-89
Written by Trevor Manternach, August 2023.
*)

tell application "System Events" to tell process "GlobalProtect"
  click menu bar item 1 of menu bar 2
  set statusText to name of static text 1 of window 1
  if statusText is "Not Connected" then
    # GlobalProtect is disconnected, so let's connect
    click button "Connect" of window 1
    set entireContents to entire contents of window 1
  else if statusText is "Connected" then
    # GlobalProtect is connected, so let's disconnect
    set windowText to entire contents of window 1
    repeat with theItem in windowText
      if (class of theItem is button) then
        if (value of attribute "AXTitle" of theItem is "Disconnect") then
          # We found a Disconnect button on the main page, let's click it.
          click theItem
          exit repeat
        else
          # We did not find a Disconnect button on the main page, let's hope there is one in the Settings Menu.
          click button "Global Protect Options Menu" of window 1
          click menu item "Disconnect" of menu "Global Protect Options Menu" of button "Global Protect Options Menu" of window 1
          exit repeat
        end if
      end if
    end repeat
  end if
  click menu bar item 1 of menu bar 2
end tell&lt;/pre&gt;
&lt;p&gt;I also have this hosted as a &lt;a class="reference external" href="https://gist.github.com/tmanternach/cbd4c213eab8569e38d6cd021b6255e5"&gt;gist&lt;/a&gt; on github. Any changes I make to it are more likely to end up there than here. Comments are welcome over there, too!&lt;/p&gt;</description><guid>https://trevormanternach.com/2023/08/17/control-palo-alto-globalprotect-vpn-using-applescript/</guid><pubDate>Fri, 18 Aug 2023 01:35:22 GMT</pubDate></item><item><title>Home Assistant Quick Bar</title><link>https://trevormanternach.com/2023/08/04/home-assistant-quick-bar/</link><dc:creator>Trevor Manternach</dc:creator><description>&lt;p&gt;I discovered that &lt;a class="reference external" href="https://www.home-assistant.io/"&gt;Home Assistant&lt;/a&gt; has a not-so-recent feature called "&lt;a class="reference external" href="https://www.home-assistant.io/docs/tools/quick-bar/"&gt;Quick Bar&lt;/a&gt;" that I somehow missed when it was released in 2020. In short, it allows you to press the &lt;cite&gt;e&lt;/cite&gt; (for entity search) or &lt;cite&gt;c&lt;/cite&gt; (for command search) anywhere in the Home Assistant web interface to access a Spotlight-style search box. This allows you access settings and devices in Home Assistant with just a few keystrokes.&lt;/p&gt;</description><guid>https://trevormanternach.com/2023/08/04/home-assistant-quick-bar/</guid><pubDate>Fri, 04 Aug 2023 23:00:00 GMT</pubDate></item><item><title>Trying out Nikola</title><link>https://trevormanternach.com/2023/07/09/trying-out-nikola.html</link><dc:creator>Trevor Manternach</dc:creator><description>&lt;p&gt;I discovered a new static site generator today, &lt;a class="reference external" href="https://getnikola.com/"&gt;Nikola&lt;/a&gt;.&lt;/p&gt;</description><guid>https://trevormanternach.com/2023/07/09/trying-out-nikola.html</guid><pubDate>Mon, 10 Jul 2023 02:11:29 GMT</pubDate></item><item><title>Audiobooks</title><link>https://trevormanternach.com/2022/11/25/audiobooks.html</link><dc:creator>Trevor Manternach</dc:creator><description>&lt;p&gt;It’s been years since I last paid for an Audible.com subscription. I just signed up this week ($5/month for 3 months) and it’s been a delight so far. I discovered that you can pretty easily remove the DRM on the audiobook .aax file. I am using &lt;a href="https://audible-converter.ml/"&gt;Audible Tools&lt;/a&gt; to help me create the ffmpeg command to do this.&lt;/p&gt;
&lt;p&gt;Another recent discovery is that &lt;a href="https://overcast.fm/"&gt;Overcast&lt;/a&gt;, my podcast player of choice, seems to natively support .m4b files (audiobook file format). It even includes artwork and chapters, so it behaves just like most of the podcasts I listen to.&lt;/p&gt;</description><guid>https://trevormanternach.com/2022/11/25/audiobooks.html</guid><pubDate>Sat, 26 Nov 2022 00:39:11 GMT</pubDate></item><item><title>1997 Photo at computer</title><link>https://trevormanternach.com/2022/08/18/the-earliest-photo.html</link><dc:creator>Trevor Manternach</dc:creator><description>&lt;p&gt;The earliest photo I have of me at a computer. Circa 1997!&lt;/p&gt;
&lt;img alt="/images/1997-Trevor.jpg" src="https://trevormanternach.com/images/1997-Trevor.jpg"&gt;</description><guid>https://trevormanternach.com/2022/08/18/the-earliest-photo.html</guid><pubDate>Thu, 18 Aug 2022 16:35:00 GMT</pubDate></item><item><title>My iPod history</title><link>https://trevormanternach.com/2022/06/04/my-ipod-history.html</link><dc:creator>Trevor Manternach</dc:creator><description>&lt;p&gt;Last month Apple &lt;a href="https://www.apple.com/newsroom/2022/05/the-music-lives-on/"&gt;announced&lt;/a&gt; the end of the iPod. I thought it might be fun to document my history with the product.&lt;/p&gt;
&lt;p&gt;--&lt;/p&gt;
&lt;p&gt;I got my first iPod in March 2005. I believe I bought mine at Best Buy on a weekend trip 350 miles away from home.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://trevormanternach.com/images/4th-Gen-iPod.jpg" width="600" alt="Picture of my first iPod"&gt;&lt;/p&gt;
&lt;p&gt;I was listening to a lot of podcasts in those early days and had to use &lt;a href="https://en.wikipedia.org/wiki/Juice_(aggregator)"&gt;"podcatcher" software&lt;/a&gt; because iTunes didn't support podcasts yet. That changed later that year when &lt;a href="https://en.wikipedia.org/wiki/History_of_iTunes#iTunes_4"&gt;iTunes 4.9&lt;/a&gt; added podcasts and the rest is history.&lt;/p&gt;
&lt;p&gt;I visited that same Best Buy a couple years later when the iPod Touch was released. I remember checking their website and they said they had them in stock, but when I got to the store I couldn't find them. I finally asked and they were still in the back, they went and got one for me.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://trevormanternach.com/images/iPod-Touch.jpg" width="600" height="450" alt="My first iPod Touch"&gt;&lt;/p&gt;
&lt;p&gt;The iPod Touch was so much fun back then. The iPhone wasn't "in" Montana back then (no joke) and so the Touch was as close as I could get. I remember jailbreaking the thing, and even hanging out in IRC chatrooms trying to troubleshoot my jailbreak attempts. :-D&lt;/p&gt;
&lt;p&gt;This past winter I spent ~$100 on new parts to revive my old 4th gen iPod. It now has new life with &lt;a href="https://www.ifixit.com/Store/iPod/iPod-4G-Photo-Battery/IF193-016?o=3"&gt;a fresh battery&lt;/a&gt; and &lt;a href="https://www.iflash.xyz/store/iflash-solo/"&gt;an SD card&lt;/a&gt; in place of the 20GB spinning hard drive. It's hard to believe a piece of consumer technology from 17 years ago is still alive and well.&lt;/p&gt;
&lt;p&gt;I love iPod. It was one of my first adventures into a lifetime of technology.&lt;/p&gt;</description><guid>https://trevormanternach.com/2022/06/04/my-ipod-history.html</guid><pubDate>Sat, 04 Jun 2022 13:41:00 GMT</pubDate></item><item><title>AdGuard Wildcard DNS with Nginx Proxy Manager</title><link>https://trevormanternach.com/2022/04/30/adguard-wildcard-dns-with-nginx-proxy-manager.html</link><dc:creator>Trevor Manternach</dc:creator><description>&lt;p&gt;I started using Nginx Proxy Manger at home recently and found a fast and easy way to add internal domains to it. Here is a simple walkthrough.&lt;/p&gt;
&lt;h4&gt;Prerequisites&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;You need to be using &lt;a href="https://adguard.com/en/adguard-home/overview.html"&gt;AdGuard Home&lt;/a&gt; for DNS&lt;/li&gt;
&lt;li&gt;You want to quickly add new domains to &lt;a href="https://nginxproxymanager.com/"&gt;Nginx Proxy Manager&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;AdGuard Home setup&lt;/h4&gt;
&lt;p&gt;In the AdGuard Home web interface, go to Filters-&amp;gt;DNS rewrites.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot of DNS rewrite options on AdGuard Home" src="https://trevormanternach.com/images/adguard-1.png" title="Screenshot of DNS rewrite options on AdGuard Home"&gt;&lt;/p&gt;
&lt;p&gt;Click &lt;strong&gt;Add DNS rewrite&lt;/strong&gt; and enter something like &lt;em&gt;*.home&lt;/em&gt; in the domain name field.&lt;/p&gt;
&lt;p&gt;Enter the IP address of your NPM host and click &lt;strong&gt;Save&lt;/strong&gt;.&lt;/p&gt;
&lt;h4&gt;Nginx Proxy Manager&lt;/h4&gt;
&lt;p&gt;&lt;img alt="Screenshot of Nginx Proxy Manager" src="https://trevormanternach.com/images/nginx-1.png" title="Screenshot of Nginx Proxy Manager"&gt;&lt;/p&gt;
&lt;p&gt;There really isn't anything special to do in NPM. Just add a Proxy Host and in the domain names field you can enter anything as long as it ends in .home (or whatever you chose for a wildcard). www.home even works!&lt;/p&gt;
&lt;p&gt;Another little feature I discovered while setting this up is that I can add multiple domain names for each proxy host. So &lt;em&gt;adguard.home&lt;/em&gt; and &lt;em&gt;dns.home&lt;/em&gt; can both get me to the same place. This helps when I can't remember the name of a service, or when you change software you can keep using something like &lt;em&gt;dashboard.home&lt;/em&gt; for your &lt;a href="https://github.com/bastienwirtz/homer"&gt;dashboard of choice&lt;/a&gt;.&lt;/p&gt;</description><category>adguard</category><category>dns</category><category>tutorial</category><guid>https://trevormanternach.com/2022/04/30/adguard-wildcard-dns-with-nginx-proxy-manager.html</guid><pubDate>Sun, 01 May 2022 02:59:42 GMT</pubDate></item><item><title>2020 Books I've Read</title><link>https://trevormanternach.com/2020/books-ive-read/</link><dc:creator>Trevor Manternach</dc:creator><description>&lt;p&gt;&lt;a href="https://www.goodreads.com/book/show/13538641-killing-kennedy" target="_blank"&gt;&lt;em&gt;Killing Kennedy: The End of Camelot&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
8 hours 25 minutes. Started January 11. Finished January 16th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.goodreads.com/book/show/10587120-killing-lincoln" target="_blank"&gt;&lt;em&gt;Killing Lincoln&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
7 hours 49 minutes. Started June 7th. Finished June 15th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.goodreads.com/book/show/52836282-true-crimes-and-misdemeanors" target="_blank"&gt;&lt;em&gt;True Crimes and Misdemeanors: The Investigation of Donald Trump&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
496 pages. Started August 18th. Finished October 1st.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.goodreads.com/book/show/54545843-where-law-ends" target="_blank"&gt;&lt;em&gt;Where Law Ends: Inside the Mueller Investigation&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
432 pages. Started October 1st. Finished October 27th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.goodreads.com/book/show/24583081-battle-for-the-big-sky" target="_blank"&gt;&lt;em&gt;Battle for the Big Sky&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
286 pages. Started October 28th. Finished November 25th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.goodreads.com/book/show/244909.The_Conscience_of_a_Conservative" target="_blank"&gt;&lt;em&gt;The Conscience of a Conservative&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
144 pages. Started November 26th. Finished November 28th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.goodreads.com/book/show/36204293-the-war-on-normal-people" target="_blank"&gt;&lt;em&gt;The War on Normal People&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
304 pages. Started November 28th. Finished December 2nd.&lt;/p&gt;</description><guid>https://trevormanternach.com/2020/books-ive-read/</guid><pubDate>Wed, 01 Jan 2020 22:08:51 GMT</pubDate></item><item><title>2019 Books I've Read</title><link>https://trevormanternach.com/2019/books-ive-read/</link><dc:creator>Trevor Manternach</dc:creator><description>&lt;p&gt;&lt;a href="https://smile.amazon.com/Animal-Farm-Classics-George-Orwell-ebook/dp/B07JH73R6T/" target="_blank"&gt;&lt;em&gt;Animal Farm&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
140 pages. Started December 29th. Finished January 9th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.amazon.com/Doing-Justice-Prosecutors-Thoughts-Punishment/dp/0525521127" target="_blank"&gt;&lt;em&gt;Doing Justice&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
368 pages. Started April 15th. Finished April 27th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.amazon.com/Pound-Foolish-Exposing-Personal-Industry/dp/B00BI6JFJM/" target="_blank"&gt;&lt;em&gt;Pound Foolish&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
9 hours 7 minutes. Started May 2nd. Finished May 14th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://smile.amazon.com/dp/B004DEPHGQ/" target="_blank"&gt;&lt;em&gt;Everything Is Obvious: *Once You Know the Answer&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
368 pages. Started May 15th. Finished May 31st.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://smile.amazon.com/Absolutely-Remarkable-Thing-Novel-ebook/dp/B0796DR2XV/" target="_blank"&gt;&lt;em&gt;An Absolutely Remarkable Thing&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
352 pages. Started June 1st. Finished June 12th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://smile.amazon.com/President-Missing-Novel-James-Patterson-ebook/dp/B072F3MYRH/" target="_blank"&gt;&lt;em&gt;The President is Missing&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
527 pages. Started June 16th. Finished June 24th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://smile.amazon.com/Paper-Towns-John-Green/dp/0525478183/" target="_blank"&gt;&lt;em&gt;Paper Towns&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
305 pages. Started June 25th. Finished July 9th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.amazon.com/Permanent-Record-Edward-Snowden/dp/1250237238/" target="_blank"&gt;&lt;em&gt;Permanent Record&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
352 pages. Started December 1st. Finished December 4th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://smile.amazon.com/Feather-Thief-Obsession-Natural-History/dp/1101981636/" target="_blank"&gt;&lt;em&gt;The Feather Thief: Beauty, Obsession, and the Natural History Heist of the Century&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
336 pages. Started November 27th. Finished December 13th.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://smile.amazon.com/1984-George-Orwell-ebook/dp/B0811YH6RT/" target="_blank"&gt;&lt;em&gt;1984&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
326 pages. Started December 16th. Finished January 9th.&lt;/p&gt;</description><guid>https://trevormanternach.com/2019/books-ive-read/</guid><pubDate>Tue, 01 Jan 2019 22:06:36 GMT</pubDate></item></channel></rss>